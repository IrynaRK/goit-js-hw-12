{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47540419-36cc7af233202b3a7b66af182';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:', error);\n    return { hits: [] };\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.getElementById('load-more');\nlet lightbox;\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n      <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n      </a>\n      <div class=\"image-info\">\n        <p>‚ù§Ô∏è ${likes}</p>\n        <p>üëÅÔ∏è ${views}</p>\n        <p>üí¨ ${comments}</p>\n        <p>‚¨áÔ∏è ${downloads}</p>\n      </div>\n    </li>`\n    )\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a');\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreButton.classList.add('hidden');\n}\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('.form');\nconst loadMoreButton = document.getElementById('load-more');\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalLoadedImages = 0;\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  currentQuery = event.target.elements['search-text'].value.trim();\n  currentPage = 1;\n  totalLoadedImages = 0;\n\n  if (!currentQuery) {\n    return iziToast.error({ message: '–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –∑–∞–ø–∏—Ç!' });\n  }\n\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const response = await getImagesByQuery(currentQuery, currentPage);\n    hideLoader();\n\n    if (!response || !response.hits || response.hits.length === 0) {\n      iziToast.warning({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      hideLoadMoreButton();\n    } else {\n      createGallery(response.hits);\n      totalLoadedImages = response.hits.length;\n\n      if (totalLoadedImages < response.totalHits) {\n        showLoadMoreButton();\n      } else {\n        hideLoadMoreButton();\n      }\n    }\n  } catch (error) {\n    handleError(error);\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage++;\n  showLoader();\n\n  try {\n    const response = await getImagesByQuery(currentQuery, currentPage);\n    hideLoader();\n\n    if (!response || !response.hits || response.hits.length === 0) {\n      hideLoadMoreButton();\n      iziToast.info({ message: \"You've reached the end of search results.\" });\n    } else {\n      createGallery(response.hits);\n      totalLoadedImages += response.hits.length;\n\n      console.log(\n        `–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ: ${totalLoadedImages}, –í—Å—å–æ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ: ${response.totalHits}`\n      );\n\n      if (totalLoadedImages >= response.totalHits) {\n        hideLoadMoreButton();\n      } else {\n        showLoadMoreButton();\n      }\n      window.scrollBy({\n        top: document.querySelector('.gallery').offsetHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    handleError(error);\n  }\n});\n\nfunction handleError(error) {\n  console.error('–ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å:', error.message || error);\n  iziToast.error({ message: '–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è!' });\n}\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","axios","error","galleryContainer","loader","loadMoreButton","lightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","searchForm","currentQuery","currentPage","totalLoadedImages","event","iziToast","response","handleError"],"mappings":"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"}